---
description: 
globs: 
alwaysApply: true
---
# Life Toolkit ç³»ç»Ÿæ¶æ„è§„åˆ™

## ğŸ—ï¸ é¡¹ç›®æ¦‚è¿°

Life Toolkit æ˜¯ä¸€ä¸ªåŸºäº **Monorepo** æ¶æ„çš„å…¨æ ˆç”Ÿæ´»ç®¡ç†å·¥å…·å¥—ä»¶ï¼Œé‡‡ç”¨ç°ä»£åŒ–æŠ€æœ¯æ ˆæ„å»ºï¼Œæ—¨åœ¨æä¾›ä¸ªäººæˆé•¿ã€ä»»åŠ¡ç®¡ç†ã€ä¹ æƒ¯è¿½è¸ªã€è´¢åŠ¡ç®¡ç†ç­‰åŠŸèƒ½çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

### æ ¹ç›®å½•æ¶æ„
```
life-toolkit/
â”œâ”€â”€ apps/                    # åº”ç”¨å±‚
â”‚   â”œâ”€â”€ server/             # NestJS åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ web/                # React Web åº”ç”¨
â”‚   â””â”€â”€ desktop/                 # Electron æ¡Œé¢åº”ç”¨
â”œâ”€â”€ packages/               # å…±äº«åŒ…
â”‚   â”œâ”€â”€ business/           # ä¸šåŠ¡åŸŸåŒ…ï¼ˆå‰åç«¯å…±äº«çš„ä¸šåŠ¡å®šä¹‰ä¸å®ç°ï¼‰
â”‚   â”‚   â”œâ”€â”€ api/            # API æ¥å£/DTO/ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ server/         # ä¸šåŠ¡æ ¸å¿ƒï¼ˆå®ä½“/ä»“å‚¨/æœåŠ¡/æ˜ å°„ï¼‰
â”‚   â”‚   â”œâ”€â”€ web/            # Web ä¸šåŠ¡ UIï¼ˆé¡µé¢/ç»„ä»¶/è·¯ç”±ï¼‰
â”‚   â”‚   â”œâ”€â”€ vo/             # å€¼å¯¹è±¡
â”‚   â”‚   â””â”€â”€ enum/           # æšä¸¾
â”‚   â”œâ”€â”€ common/             # é€šç”¨å·¥å…·
â”‚   â”œâ”€â”€ common-web/         # Web é€šç”¨ç»„ä»¶
â”‚   â””â”€â”€ components/         # å¯å¤ç”¨ç»„ä»¶
â”œâ”€â”€ .cursor/                # Cursor IDE é…ç½®
â”‚   â””â”€â”€ rules/              # ä»£ç ç”Ÿæˆè§„åˆ™
â””â”€â”€ é…ç½®æ–‡ä»¶...
```

## ğŸ¯ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯æ ˆ (apps/server)
- **æ¡†æ¶**: NestJS (Node.js)
- **æ•°æ®åº“**: TypeORM + MySQL/SQLite
- **è®¤è¯**: JWT + bcrypt
- **è°ƒåº¦**: @nestjs/schedule
- **AIé›†æˆ**: OpenAI API
- **æ–‡ä»¶å¤„ç†**: xlsx, ical-generator
- **å¼€å‘å·¥å…·**: TypeScript, Jest

### å‰ç«¯æŠ€æœ¯æ ˆ (apps/web)
- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **UIåº“**: Arco Design + Ant Design
- **çŠ¶æ€ç®¡ç†**: Redux + Nanostores
- **è·¯ç”±**: React Router v6
- **å›¾è¡¨**: BizCharts + ECharts
- **æ ·å¼**: Less + TailwindCSS
- **å·¥å…·åº“**: lodash-es, dayjs, date-fns

### æ¡Œé¢åº”ç”¨ (apps/desktop)
- **æ¡†æ¶**: Electron
- **æ„å»ºå·¥å…·**: electron-vite
- **æ‰“åŒ…**: electron-builder
- **å¼€å‘è¯­è¨€**: TypeScript

## ğŸ›ï¸ ç³»ç»Ÿæ¶æ„

### åˆ†å±‚æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å‰ç«¯åº”ç”¨å±‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Web App    â”‚  â”‚  PC App     â”‚   â”‚
â”‚  â”‚  (React)    â”‚  â”‚ (Electron)  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å…±äº«åŒ…å±‚                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ VO  â”‚ â”‚ API â”‚ â”‚ç»„ä»¶ â”‚ â”‚å·¥å…· â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           åç«¯æœåŠ¡å±‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        NestJS Server           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”      â”‚ â”‚
â”‚  â”‚  â”‚ä¸šåŠ¡ â”‚ â”‚è®¤è¯ â”‚ â”‚AI   â”‚      â”‚ â”‚
â”‚  â”‚  â”‚æ¨¡å— â”‚ â”‚æ¨¡å— â”‚ â”‚æ¨¡å— â”‚      â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           æ•°æ®å­˜å‚¨å±‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   MySQL     â”‚  â”‚   SQLite    â”‚   â”‚
â”‚  â”‚  (ç”Ÿäº§ç¯å¢ƒ)  â”‚  â”‚  (å¼€å‘ç¯å¢ƒ)  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ä¸šåŠ¡æ¨¡å—æ¶æ„

### åç«¯æ ¸å¿ƒåŸŸå®ç° (packages/business/server/src)
```
business/
â”œâ”€â”€ growth/                 # ä¸ªäººæˆé•¿æ¨¡å—
â”‚   â”œâ”€â”€ todo/
â”‚   â”œâ”€â”€ task/
â”‚   â”œâ”€â”€ goal/
â”‚   â”œâ”€â”€ habit/
â”‚   â””â”€â”€ track-time/
â”œâ”€â”€ expenses/              # è´¢åŠ¡ç®¡ç†æ¨¡å—
â”œâ”€â”€ users/                 # ç”¨æˆ·ç®¡ç†æ¨¡å—
â”œâ”€â”€ auth/                  # è®¤è¯æˆæƒæ¨¡å—
â”œâ”€â”€ ai/                    # AI æœåŠ¡æ¨¡å—
â”œâ”€â”€ calendar/              # æ—¥å†æ¨¡å—
â””â”€â”€ excel/                 # Excel å¤„ç†æ¨¡å—
```

### åç«¯é€‚é…å±‚ï¼ˆæ§åˆ¶å™¨/æ¨¡å—ï¼‰(apps/server/src/business)
- ä½œä¸º Nest æ§åˆ¶å™¨ä¸æ¨¡å—é€‚é…å±‚ï¼Œå¯¼å…¥ `@life-toolkit/business-server` çš„å®ä½“/æœåŠ¡/ä»“å‚¨ã€‚
- è´Ÿè´£è·¯ç”±ã€é‰´æƒã€å‚æ•°æ ¡éªŒä¸è¯·æ±‚/å“åº”åŒ…è£…ï¼Œä¸šåŠ¡é€»è¾‘åœ¨ `packages/business/server` ä¸­å®ç°ã€‚

### å‰ç«¯é¡µé¢æ¨¡å— (packages/business/web/src/pages)
```
pages/
â”œâ”€â”€ growth/                # ä¸ªäººæˆé•¿é¡µé¢
â”œâ”€â”€ expense/               # è´¢åŠ¡ç®¡ç†é¡µé¢
â”œâ”€â”€ ai/                    # AI åŠ©æ‰‹é¡µé¢
â”œâ”€â”€ timer/                 # è®¡æ—¶å™¨é¡µé¢
â”œâ”€â”€ dashboard/             # ä»ªè¡¨æ¿é¡µé¢
â”œâ”€â”€ user/                  # ç”¨æˆ·ä¸­å¿ƒé¡µé¢
â”œâ”€â”€ login/                 # ç™»å½•é¡µé¢
â””â”€â”€ ...                    # å…¶ä»–åŠŸèƒ½é¡µé¢
```

apps/web ä»…ä½œä¸ºå®¿ä¸»å…¥å£ï¼Œé€šè¿‡ `apps/web/src/main.tsx` å¼•å…¥ `@life-toolkit/business-web` çš„ `LifeToolkitApp`ã€‚

## ğŸ“¦ åŒ…ç®¡ç†æ¶æ„

### Monorepo ç®¡ç†
- **åŒ…ç®¡ç†å™¨**: pnpm (workspace)
- **æ„å»ºå·¥å…·**: Turbo
- **ç‰ˆæœ¬ç®¡ç†**: workspace:* å†…éƒ¨ä¾èµ–

### å…±äº«åŒ…è®¾è®¡
```
packages/
â”œâ”€â”€ business/              # ä¸šåŠ¡åŸŸåŒ…
â”‚   â”œâ”€â”€ api/               # API æ¥å£/DTO/ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ server/            # ä¸šåŠ¡æ ¸å¿ƒï¼ˆå®ä½“/ä»“å‚¨/æœåŠ¡/æ˜ å°„ï¼‰
â”‚   â”œâ”€â”€ web/               # Web ä¸šåŠ¡ UIï¼ˆé¡µé¢/ç»„ä»¶/è·¯ç”±ï¼‰
â”‚   â”œâ”€â”€ vo/                # å€¼å¯¹è±¡ (Value Objects)
â”‚   â””â”€â”€ enum/              # ä¸šåŠ¡æšä¸¾
â”œâ”€â”€ common/                 # é€šç”¨å·¥å…·
â”œâ”€â”€ common-web/             # Web é€šç”¨ç»„ä»¶
â””â”€â”€ components/             # å¯å¤ç”¨ç»„ä»¶
```

## ğŸ”„ æ•°æ®æµæ¶æ„

### æ ‡å‡†ä¸šåŠ¡æ¨¡å—ç»“æ„
åç«¯æ ¸å¿ƒåŸŸç»“æ„ (packages/business/server/src/{module})
```
{module}/
â”œâ”€â”€ entities/              # æ•°æ®å®ä½“ (TypeORM)
â”œâ”€â”€ dto/                   # æ•°æ®ä¼ è¾“å¯¹è±¡
â”œâ”€â”€ mappers/               # å¯¹è±¡æ˜ å°„å™¨
â”œâ”€â”€ {module}.repository.ts # ä»“å‚¨
â””â”€â”€ {module}.service.ts    # ä¸šåŠ¡æœåŠ¡
```

åç«¯é€‚é…å±‚ç»“æ„ (apps/server/src/business/{module})
```
{module}/
â”œâ”€â”€ {module}.controller.ts # æ§åˆ¶å™¨
â””â”€â”€ {module}.module.ts     # æ¨¡å—å®šä¹‰
```

### æ•°æ®æµå‘
```
Client Request
    â†“
Controller (éªŒè¯ + è·¯ç”±)
    â†“
Service (ä¸šåŠ¡é€»è¾‘)
    â†“
Repository (æ•°æ®è®¿é—®)
    â†“
Database (æ•°æ®å­˜å‚¨)
    â†“
Entity â†’ DTO â†’ VO
    â†“
Client Response
```

- æœåŠ¡è¿”å›ç»Ÿä¸€ä½¿ç”¨ `ListResponseDto` ä¸ `PageResponseDto`ï¼ˆä½äº `packages/business/server/src/common/response/`ï¼‰ã€‚

## ğŸ› ï¸ å¼€å‘å·¥å…·é“¾

### æ„å»ºå’Œéƒ¨ç½²
- **å¼€å‘æœåŠ¡**: `pnpm dev` (Turbo å¹¶è¡Œå¯åŠ¨)
- **æ„å»º**: `pnpm build` (Turbo ä¼˜åŒ–æ„å»º)
- **éƒ¨ç½²**: ç‹¬ç«‹çš„éƒ¨ç½²è„šæœ¬
- **ä»£ç è´¨é‡**: ESLint + Prettier + Husky

### å¼€å‘ç¯å¢ƒ
- **IDE**: Cursor (AI è¾…åŠ©å¼€å‘)
- **è°ƒè¯•**: NestJS Debug + React DevTools
- **æµ‹è¯•**: Jest (å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•)
- **APIæ–‡æ¡£**: è‡ªåŠ¨ç”Ÿæˆ (è®¡åˆ’ä¸­)

## ğŸ” å®‰å…¨æ¶æ„

### è®¤è¯æˆæƒ
- **JWT Token**: æ— çŠ¶æ€è®¤è¯
- **å¯†ç åŠ å¯†**: bcrypt å“ˆå¸Œ
- **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (è®¡åˆ’ä¸­)

### æ•°æ®å®‰å…¨
- **è¾“å…¥éªŒè¯**: class-validator
- **SQLæ³¨å…¥é˜²æŠ¤**: TypeORM å‚æ•°åŒ–æŸ¥è¯¢
- **XSSé˜²æŠ¤**: å‰ç«¯è¾“å…¥è¿‡æ»¤

## ğŸ“Š æ•°æ®æ¶æ„

### æ•°æ®åº“è®¾è®¡åŸåˆ™
- **å®ä½“å…³ç³»**: TypeORM è£…é¥°å™¨å®šä¹‰
- **å­—æ®µç±»å‹**: æ ‡å‡†åŒ–å­—æ®µç±»å‹æ˜ å°„
- **ç´¢å¼•ç­–ç•¥**: åŸºäºæŸ¥è¯¢æ¨¡å¼ä¼˜åŒ–
- **æ•°æ®è¿ç§»**: TypeORM Migration

### æ•°æ®æ¨¡å‹è§„èŒƒ
```typescript
// å®ä½“å®šä¹‰ç¤ºä¾‹
@Entity()
export class TodoEntity {
  @PrimaryGeneratedColumn()
  id: number;

  @Column('varchar')
  @IsString()
  title: string;

  @Column('boolean', { default: false })
  @IsBoolean()
  completed: boolean;

  @CreateDateColumn()
  createdAt: Date;
}
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–
- **ä»£ç åˆ†å‰²**: Vite åŠ¨æ€å¯¼å…¥
- **ç»„ä»¶æ‡’åŠ è½½**: React.lazy + Suspense
- **çŠ¶æ€ç®¡ç†**: ç²¾ç»†åŒ–çŠ¶æ€æ›´æ–°
- **ç¼“å­˜ç­–ç•¥**: æµè§ˆå™¨ç¼“å­˜ + å†…å­˜ç¼“å­˜

### åç«¯ä¼˜åŒ–
- **æ•°æ®åº“ä¼˜åŒ–**: ç´¢å¼• + æŸ¥è¯¢ä¼˜åŒ–
- **ç¼“å­˜ç­–ç•¥**: å†…å­˜ç¼“å­˜ (è®¡åˆ’ä¸­)
- **å¼‚æ­¥å¤„ç†**: é˜Ÿåˆ— + è°ƒåº¦ä»»åŠ¡
- **APIä¼˜åŒ–**: åˆ†é¡µ + å­—æ®µç­›é€‰

## ğŸ“± è·¨å¹³å°æ”¯æŒ

### å¤šç«¯é€‚é…
- **Web**: å“åº”å¼è®¾è®¡ + PWA (è®¡åˆ’ä¸­)
- **Desktop**: Electron è·¨å¹³å°
- **Mobile**: Web ç§»åŠ¨ç«¯é€‚é…

### æ•°æ®åŒæ­¥
- **å®æ—¶åŒæ­¥**: WebSocket (è®¡åˆ’ä¸­)
- **ç¦»çº¿æ”¯æŒ**: Service Worker (è®¡åˆ’ä¸­)
- **å†²çªè§£å†³**: æ—¶é—´æˆ³ + ç‰ˆæœ¬æ§åˆ¶ (è®¡åˆ’ä¸­)

## ğŸ”® æ‰©å±•æ€§è®¾è®¡

### æ¨¡å—åŒ–æ¶æ„
- **æ’ä»¶ç³»ç»Ÿ**: åŠ¨æ€æ¨¡å—åŠ è½½ (è®¡åˆ’ä¸­)
- **ä¸»é¢˜ç³»ç»Ÿ**: å¯é…ç½® UI ä¸»é¢˜
- **å›½é™…åŒ–**: i18n å¤šè¯­è¨€æ”¯æŒ (è®¡åˆ’ä¸­)

### API è®¾è®¡
- **RESTful**: æ ‡å‡† REST API
- **GraphQL**: çµæ´»æŸ¥è¯¢ (è®¡åˆ’ä¸­)
- **ç‰ˆæœ¬æ§åˆ¶**: API ç‰ˆæœ¬ç®¡ç†

## ğŸ“‹ å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- **å‘½åçº¦å®š**: camelCase + PascalCase
- **æ–‡ä»¶ç»„ç»‡**: åŠŸèƒ½æ¨¡å—åŒ–ç»„ç»‡
- **æ³¨é‡Šè§„èŒƒ**: JSDoc + ä¸šåŠ¡æ³¨é‡Š
- **ç±»å‹å®‰å…¨**: ä¸¥æ ¼ TypeScript æ¨¡å¼

### Git å·¥ä½œæµ
- **åˆ†æ”¯ç­–ç•¥**: Feature Branch + Main
- **æäº¤è§„èŒƒ**: Conventional Commits
- **ä»£ç å®¡æŸ¥**: Pull Request æµç¨‹
- **è‡ªåŠ¨åŒ–**: Husky é¢„æäº¤æ£€æŸ¥
