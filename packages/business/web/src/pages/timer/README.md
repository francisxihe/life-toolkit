# Timer 计时器

一个功能丰富的番茄钟计时器，支持全屏、普通和mini三种模式。

## 功能特性

### 普通模式

- 大型翻页式数字显示
- 播放/暂停控制
- 重置功能
- 设置功能
- 全屏功能 ✨ 新功能
- 切换到mini模式

### Mini模式

- 紧凑的悬浮窗口设计
- 固定在屏幕右上角
- 简洁的时间显示（MM:SS格式）
- 快速控制按钮：
  - 播放/暂停
  - 重置
  - 全屏切换 ✨ 新功能
  - 切换回普通模式
- 半透明背景，支持毛玻璃效果
- 响应式设计，适配移动端

### 全屏模式 ✨ 新功能

- 沉浸式全屏体验
- 隐藏浏览器界面，专注计时
- 支持ESC键退出全屏
- 在普通模式和mini模式下都可切换
- 自动检测全屏状态变化

## 使用方法

1. **启动计时器**：点击播放按钮开始计时
2. **暂停计时器**：点击暂停按钮暂停计时
3. **重置计时器**：点击重置按钮恢复到初始时间
4. **切换模式**：
   - 普通模式：点击减号图标切换到mini模式
   - Mini模式：点击加号图标切换回普通模式
5. **全屏切换**：
   - 点击全屏图标进入全屏模式
   - 点击退出全屏图标或按ESC键退出全屏
   - 在mini模式下也可以切换全屏
6. **设置时间**：在普通模式下点击设置按钮调整计时时间

## 技术实现

- React + TypeScript
- Arco Design 图标库
- CSS3 动画和毛玻璃效果
- 响应式设计
- Context状态管理
- Fullscreen API 全屏控制

## 组件结构

```
timer/
├── index.tsx              # 主计时器页面
├── context.ts             # Context状态管理
├── utils.ts               # 工具函数
├── style.module.less      # 主页面样式
├── normal/                # 普通模式组件
│   ├── index.tsx          # 普通模式主组件
│   ├── Countdown.tsx      # 倒计时组件
│   ├── Flip.tsx           # 翻页动画组件
│   ├── Flip.css           # 翻页动画样式
│   └── style.module.less  # 普通模式样式
├── mini/                  # Mini模式组件
│   ├── index.ts           # 导出文件
│   ├── MiniTimer.tsx      # Mini计时器组件
│   └── MiniTimer.module.css # Mini模式样式
├── actions/               # 操作按钮组件
└── README.md              # 说明文档
```

## 样式特点

### 普通模式

- 全屏居中显示
- 翻页式数字动画
- 右下角操作按钮组

### Mini模式

- 半透明黑色背景（80%透明度）
- 毛玻璃效果（backdrop-filter）
- 圆角边框和阴影
- 悬停动画效果
- 等宽字体显示时间

### 全屏模式

- 完全隐藏浏览器界面
- 沉浸式体验
- 保持原有功能和样式
- 支持键盘快捷键（ESC退出）

## 核心组件说明

### Timer (主组件)

- **文件**: `index.tsx`
- **功能**: 管理整个倒计时器的状态和逻辑
- **状态管理**:
  - `clockState`: 倒计时运行状态 (播放/暂停)
  - `countdown`: 倒计时时长 (秒)
  - `clockRefresh`: 刷新标志

### Countdown (倒计时显示)

- **文件**: `components/clock/Countdown.tsx`
- **功能**: 核心倒计时逻辑和时间显示
- **特性**:
  - 精确的时间计算
  - 自动清理定时器
  - 支持暂停和恢复

### FlipItem (翻页动画)

- **文件**: `components/clock/Flip.tsx`
- **功能**: 单个数字的翻页动画效果
- **特性**: 平滑的翻页过渡动画

### PlayController (播放控制)

- **文件**: `components/actions/PlayController.tsx`
- **功能**: 播放/暂停按钮
- **图标**: 使用 Arco Design 的播放和暂停图标

### Setting (设置)

- **文件**: `components/actions/Setting.tsx`
- **功能**: 倒计时时长设置
- **特性**: 模态框形式的设置界面

## 开发说明

### 本地开发

```bash
# 安装依赖
pnpm install

# 启动开发服务器
pnpm dev
```

### 文件修改指南

- **修改默认时长**: 在 `index.tsx` 中修改 `countdown` 初始值
- **调整样式**: 修改对应的 CSS 文件
- **添加功能**: 在 `actions` 目录下添加新的控制组件

### 注意事项

- 组件卸载时会自动清理定时器，避免内存泄漏
- 时间计算使用时间戳差值，确保在页面失焦时也能保持准确
- 所有状态变更都通过 props 传递，保持组件间的松耦合

## 扩展功能建议

- [ ] 添加音效提醒
- [ ] 支持多个预设时长
- [ ] 添加番茄钟模式
- [ ] 支持背景主题切换
- [ ] 添加使用统计功能
