# Timer 倒计时器

一个功能完整的倒计时器应用，具有翻页时钟效果和完整的控制功能。

## 功能特性

- ⏰ **翻页时钟显示**: 采用翻页动画效果显示倒计时，格式为 HH:MM:SS
- ▶️ **播放/暂停控制**: 支持开始和暂停倒计时
- 🔄 **重置功能**: 一键重置倒计时到初始状态
- ⚙️ **自定义设置**: 可以自定义倒计时时长
- 📱 **响应式设计**: 适配不同屏幕尺寸

## 组件结构

```
timer/
├── index.tsx              # 主组件入口
├── index.css              # 主样式文件
├── README.md              # 说明文档
└── components/
    ├── clock/             # 时钟显示组件
    │   ├── index.ts       # 导出文件
    │   ├── Countdown.tsx  # 倒计时主逻辑
    │   ├── Countdown.css  # 倒计时样式
    │   ├── Flip.tsx       # 翻页动画组件
    │   ├── Flip.css       # 翻页动画样式
    │   └── utils.ts       # 时间处理工具函数
    └── actions/           # 操作控制组件
        ├── index.ts       # 导出文件
        ├── PlayController.tsx  # 播放/暂停控制
        └── Setting.tsx    # 设置组件
```

## 核心组件说明

### Timer (主组件)
- **文件**: `index.tsx`
- **功能**: 管理整个倒计时器的状态和逻辑
- **状态管理**:
  - `clockState`: 倒计时运行状态 (播放/暂停)
  - `countdown`: 倒计时时长 (秒)
  - `clockRefresh`: 刷新标志

### Countdown (倒计时显示)
- **文件**: `components/clock/Countdown.tsx`
- **功能**: 核心倒计时逻辑和时间显示
- **特性**:
  - 精确的时间计算
  - 自动清理定时器
  - 支持暂停和恢复

### FlipItem (翻页动画)
- **文件**: `components/clock/Flip.tsx`
- **功能**: 单个数字的翻页动画效果
- **特性**: 平滑的翻页过渡动画

### PlayController (播放控制)
- **文件**: `components/actions/PlayController.tsx`
- **功能**: 播放/暂停按钮
- **图标**: 使用 Arco Design 的播放和暂停图标

### Setting (设置)
- **文件**: `components/actions/Setting.tsx`
- **功能**: 倒计时时长设置
- **特性**: 模态框形式的设置界面

## 使用方法

### 基本操作

1. **开始倒计时**: 点击播放按钮 ▶️
2. **暂停倒计时**: 点击暂停按钮 ⏸️
3. **重置倒计时**: 点击刷新按钮 🔄
4. **设置时长**: 点击设置按钮 ⚙️，在弹窗中输入秒数

### 默认设置

- 默认倒计时时长: 1500 秒 (25 分钟)
- 时间格式: HH:MM:SS
- 最小时间单位: 秒

## 技术实现

### 依赖库
- **React**: 组件框架
- **Arco Design**: UI 组件库 (图标、模态框、表单等)
- **TypeScript**: 类型安全

### 核心算法
- **时间转换**: `getTimeArr()` 函数将秒数转换为 [时十位, 时个位, 分十位, 分个位, 秒十位, 秒个位] 数组
- **精确计时**: 使用 `setTimeout` 和时间戳差值确保计时精度，通过 useRef 避免闭包问题
- **状态同步**: 通过 React Hooks 和 useCallback 管理组件间状态同步

### 样式特性
- **全屏居中**: 时钟在屏幕中央显示
- **固定操作栏**: 控制按钮固定在右下角
- **翻页动画**: CSS3 动画实现数字翻页效果

## 开发说明

### 本地开发
```bash
# 安装依赖
pnpm install

# 启动开发服务器
pnpm dev
```

### 文件修改指南
- **修改默认时长**: 在 `index.tsx` 中修改 `countdown` 初始值
- **调整样式**: 修改对应的 CSS 文件
- **添加功能**: 在 `actions` 目录下添加新的控制组件

### 注意事项
- 组件卸载时会自动清理定时器，避免内存泄漏
- 时间计算使用时间戳差值，确保在页面失焦时也能保持准确
- 所有状态变更都通过 props 传递，保持组件间的松耦合

## 扩展功能建议

- [ ] 添加音效提醒
- [ ] 支持多个预设时长
- [ ] 添加番茄钟模式
- [ ] 支持背景主题切换
- [ ] 添加使用统计功能 